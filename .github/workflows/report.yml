name: AWS Inspector Daily Excel Report

on:
schedule:
- cron: '30 1 * * *'   # Runs daily at 07:00 AM IST
workflow_dispatch:

permissions:
id-token: write
contents: read

jobs:
generate-report:
runs-on: ubuntu-latest

```
steps:
- name: Checkout Repository
  uses: actions/checkout@v4

- name: Configure AWS Credentials (OIDC)
  uses: aws-actions/configure-aws-credentials@v4
  with:
    role-to-assume: ${{ secrets.AWS_ROLE_ARN }}
    aws-region: ${{ secrets.AWS_REGION }}

- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.11'

- name: Install Python packages
  run: |
    pip install -r requirements.txt

- name: Generate Inspector Report
  run: python inspector_report.py

- name: Upload Excel Report
  uses: actions/upload-artifact@v4
  with:
    name: aws-inspector-excel-report
    path: "*.xlsx"
```
